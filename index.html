<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI News + Automation + Notion Widget</title>
  <style>
    :root{
      --bg:#0b0f19;
      --card:#101827;
      --muted:#92a0b3;
      --text:#e8eef7;
      --line:#1b2a43;
      --accent:#6ee7ff;
      --accent2:#a78bfa;
      --good:#34d399;
      --warn:#fbbf24;
      --bad:#fb7185;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:16px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo", "Noto Sans KR", Arial, "Helvetica Neue", Helvetica, sans-serif;
    }
    html,body{height:100%; background:transparent; margin:0;}
    body{font-family:var(--sans); color:var(--text);}
    .wrap{
      background:linear-gradient(180deg, rgba(16,24,39,.92), rgba(11,15,25,.92));
      border:1px solid var(--line);
      box-shadow:var(--shadow);
      border-radius:var(--radius);
      overflow:hidden;
      max-width:980px;
      margin:0 auto;
      min-height:560px;
    }
    header{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 16px;
      border-bottom:1px solid var(--line);
      gap:12px;
    }
    .brand{display:flex; align-items:center; gap:10px; min-width:0;}
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: radial-gradient(circle at 30% 30%, var(--accent), var(--accent2));
      box-shadow:0 0 16px rgba(110,231,255,.35);
      flex:0 0 auto;
    }
    .title{
      font-weight:900; letter-spacing:-0.2px; font-size:14px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .subtitle{
      color:var(--muted); font-size:12px; margin-left:8px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .controls{display:flex; align-items:center; gap:8px; flex:0 0 auto;}
    .btn{
      appearance:none; border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:8px 10px;
      border-radius:12px;
      cursor:pointer;
      font-size:12px;
    }
    .btn:hover{border-color:rgba(110,231,255,.45);}
    .pill{
      font-family:var(--mono);
      font-size:11px;
      color:var(--muted);
      padding:6px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background:rgba(255,255,255,.02);
      max-width:320px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }

    .tabs{
      display:flex; gap:8px;
      padding:10px 12px;
      border-bottom:1px solid var(--line);
      background:rgba(255,255,255,.02);
      flex-wrap:wrap;
    }
    .tab{
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      padding:8px 10px;
      font-size:12px;
      border-radius:999px;
      cursor:pointer;
      color:var(--muted);
      user-select:none;
    }
    .tab.active{
      color:var(--text);
      border-color:rgba(110,231,255,.55);
      box-shadow:0 0 0 3px rgba(110,231,255,.12) inset;
    }

    .subtabs{
      display:flex; gap:8px;
      padding:10px 12px;
      border-bottom:1px solid var(--line);
      background:rgba(255,255,255,.015);
      flex-wrap:wrap;
    }
    .subtab{
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      padding:7px 10px;
      font-size:11px;
      border-radius:999px;
      cursor:pointer;
      color:var(--muted);
      user-select:none;
    }
    .subtab.active{
      color:var(--text);
      border-color:rgba(167,139,250,.6);
      box-shadow:0 0 0 3px rgba(167,139,250,.12) inset;
    }

    .bar{
      display:flex;
      gap:10px;
      align-items:center;
      padding:10px 12px;
      border-bottom:1px solid var(--line);
      flex-wrap:wrap;
    }
    .search{
      flex:1 1 220px;
      display:flex; align-items:center;
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      border-radius:12px;
      padding:8px 10px;
      gap:8px;
    }
    .search input{
      width:100%;
      border:0; outline:0;
      background:transparent;
      color:var(--text);
      font-size:12px;
    }
    .meta{
      display:flex; gap:8px; align-items:center; flex:0 0 auto;
      color:var(--muted); font-size:12px;
    }
    .chip{
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      border-radius:999px;
      padding:6px 10px;
      font-size:11px;
      color:var(--muted);
      cursor:pointer;
      user-select:none;
    }
    .chip.on{
      color:var(--text);
      border-color:rgba(167,139,250,.6);
      box-shadow:0 0 0 3px rgba(167,139,250,.12) inset;
    }

    main{padding:12px;}
    .grid{display:grid; grid-template-columns: 1fr; gap:10px;}
    .card{
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(255,255,255,.02);
      padding:12px 12px 10px;
    }
    .row{display:flex; align-items:flex-start; justify-content:space-between; gap:10px;}
    .h{font-size:13px; font-weight:900; letter-spacing:-.2px; margin:0; line-height:1.35;}
    .badges{display:flex; gap:6px; flex-wrap:wrap; justify-content:flex-end;}
    .badge{
      font-size:10px;
      border-radius:999px;
      padding:4px 8px;
      border:1px solid var(--line);
      color:var(--muted);
      background:rgba(255,255,255,.02);
      white-space:nowrap;
    }
    .b1{border-color:rgba(110,231,255,.35); color:rgba(110,231,255,.95);}   /* LLM */
    .b2{border-color:rgba(167,139,250,.35); color:rgba(167,139,250,.95);}  /* Automation */
    .b3{border-color:rgba(52,211,153,.35); color:rgba(52,211,153,.95);}    /* Hot */
    .b4{border-color:rgba(251,191,36,.35); color:rgba(251,191,36,.95);}    /* Notion/Prod */
    .sum{
      color:rgba(232,238,247,.92);
      font-size:12px;
      margin:8px 0 10px;
      line-height:1.55;
      white-space:pre-wrap;
    }
    .foot{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      border-top:1px solid rgba(27,42,67,.7);
      padding-top:10px;
      color:var(--muted);
      font-size:11px;
      flex-wrap:wrap;
    }
    a{color:var(--accent); text-decoration:none;}
    a:hover{text-decoration:underline;}
    .small{font-family:var(--mono); opacity:.95;}
    .empty{
      padding:24px 12px;
      color:var(--muted);
      font-size:12px;
      text-align:center;
      border:1px dashed rgba(27,42,67,.9);
      border-radius:14px;
      background:rgba(255,255,255,.01);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="dot"></div>
        <div class="title">AI News / Automation / Notion</div>
        <div class="subtitle" id="subTitle">ÌïµÏã¨ Ïù¥ÏäàÎßå ÏûêÎèô ÏöîÏïΩ</div>
      </div>
      <div class="controls">
        <div class="pill" id="statusPill">Î°úÎî© Ï§ÄÎπÑ</div>
        <button class="btn" id="refreshBtn">ÏÉàÎ°úÍ≥†Ïπ®</button>
      </div>
    </header>

    <!-- Main Tabs -->
    <div class="tabs" id="mainTabs">
      <div class="tab active" data-tab="ai">AI</div>
      <div class="tab" data-tab="automation">Automation</div>
      <div class="tab" data-tab="notion">Notion</div>
    </div>

    <!-- Sub Tabs -->
    <div class="subtabs" id="subTabs"></div>

    <!-- Filters -->
    <div class="bar">
      <div class="search">
        <span style="opacity:.7">üîé</span>
        <input id="q" placeholder="Í≤ÄÏÉâ: GPT, Claude, Gemini, NotebookLM, n8n, Make, Zapier..." />
      </div>
      <div class="meta">
        <div class="chip on" id="onlyFresh">ÏµúÍ∑º 24h</div>
        <div class="chip" id="onlyTop">ÏÉÅÏúÑÎßå</div>
      </div>
    </div>

    <main>
      <div class="grid" id="list"></div>
      <div class="empty" id="empty" style="display:none">
        ÌëúÏãúÌï† Îâ¥Ïä§Í∞Ä ÏóÜÏäµÎãàÎã§. (ÌïÑÌÑ∞/Í≤ÄÏÉâ Ï°∞Í±¥ÏùÑ Ï§ÑÏù¥Í±∞ÎÇò ÏÉàÎ°úÍ≥†Ïπ® Ìï¥Î≥¥ÏÑ∏Ïöî)
      </div>
    </main>
  </div>

<script>
/**
 * =========================
 * ÏÑ§Ï†ï (ÌïÑÏàò)
 * =========================
 * API Í∂åÏû• ÌòïÌÉú:
 * GET {API_BASE}?type=ai|automation|notion&hours=24|168&top=0|1
 * -> { updated_at, items:[ {title,url,source,published_at,summary_ko,tags:[...]} ] }
 */
const API_BASE = ""; // Ïòà: "https://your-domain.com/api/news" (ÎπÑÏõåÎëêÎ©¥ Îç∞Î™® Î™®Îìú)

/**
 * =========================
 * ÌÉ≠ Ï†ïÏùò
 * =========================
 */
const SUBTABS = {
  ai: [
    { id:"all", label:"All" },
    { id:"llm", label:"LLM" },
    { id:"agents", label:"Agents" },
    { id:"rag", label:"RAG/Vector" },
    { id:"eval", label:"Eval/Observability" },
    { id:"multimodal", label:"Multimodal" },
    { id:"prod", label:"Productivity (NotebookLM)" },
    { id:"hot", label:"Hot/Policy/Security" }
  ],
  automation: [
    { id:"all", label:"All" },
    { id:"make", label:"Make" },
    { id:"n8n", label:"n8n" },
    { id:"zapier", label:"Zapier" },
    { id:"opal", label:"Google Opal" },
    { id:"workflow", label:"Workflows/Orchestration" },
    { id:"hot", label:"Hot/Security" }
  ],
  notion: [
    { id:"all", label:"All" },
    { id:"update", label:"Updates" },
    { id:"status", label:"Status/Incident" },
    { id:"creators", label:"Creators" },
    { id:"hot", label:"Hot" }
  ]
};

/**
 * =========================
 * ÌÇ§ÏõåÎìú Í∏∞Î∞ò Î∂ÑÎ•ò/Ïä§ÏΩîÏñ¥ÎßÅ
 * =========================
 * - score: Ïö∞ÏÑ†ÏàúÏúÑ Ï†ïÎ†¨
 * - tags: Ïπ¥Îìú Î±ÉÏßÄ
 * - bucket: ÏÑúÎ∏åÌÉ≠ Î∂ÑÎ•òÏö©
 */
const RULES = [
  // LLM vendors
  { bucket:"llm", tag:"GPT/OpenAI", w:40, k:["gpt","openai","chatgpt","oai","gpt-4","gpt-5","assistants api","responses api"] },
  { bucket:"llm", tag:"Claude/Anthropic", w:40, k:["claude","anthropic","constitutional ai"] },
  { bucket:"llm", tag:"Gemini/Google", w:35, k:["gemini","google ai","deepmind","vertex ai","google model","bard"] },

  // Agents / tool-use / MCP / orchestration
  { bucket:"agents", tag:"Agents", w:24, k:["agent","agentic","tool use","tool-use","function calling","functions","mcp","model context protocol","planner","orchestration","langgraph","autogen","crewai"] },
  { bucket:"workflow", tag:"Workflows", w:18, k:["workflow","orchestration","pipeline","dag","scheduler"] },

  // RAG & Vector DB
  { bucket:"rag", tag:"RAG/Vector", w:20, k:["rag","retrieval","vector","embedding","semantic search","hybrid search","rerank","reranker","pinecone","weaviate","milvus","qdrant","elasticsearch vector","opensearch vector"] },

  // Eval / Observability
  { bucket:"eval", tag:"Eval/Observability", w:18, k:["eval","evaluation","observability","tracing","prompt eval","hallucination","grounding","langfuse","helicone","ragas","weights & biases","wandb","opik"] },

  // Multimodal / Image / Video
  { bucket:"multimodal", tag:"Multimodal", w:16, k:["multimodal","vision","image generation","text-to-image","video generation","text-to-video","runway","pika","midjourney","stable diffusion","sora"] },

  // Productivity / NotebookLM
  { bucket:"prod", tag:"NotebookLM", w:22, k:["notebooklm","notebook lm","notebooklm plus","sources","studio","workspace updates"] },

  // Automation tools
  { bucket:"make", tag:"Make", w:24, k:["make.com","integromat","scenario","router","iterator","make module"] },
  { bucket:"n8n", tag:"n8n", w:24, k:["n8n","n8n node","n8n workflow","n8n cloud"] },
  { bucket:"zapier", tag:"Zapier", w:20, k:["zapier","zap","zaps","zapier ai"] },
  { bucket:"opal", tag:"Google Opal", w:20, k:["google opal","opal (google)","opal ai","opal no-code","opal"] }, // opalÏùÄ Î¨∏Îß•ÏÉÅ googleÎ°ú Ï∑®Í∏â
  { bucket:"automation", tag:"Automation", w:16, k:["automation","rpa","integration","webhook","api connector","iPaaS","no-code","low-code","noco"] },

  // Notion
  { bucket:"update", tag:"Notion Update", w:22, k:["notion update","release notes","what's new","whats new","feature rollout","database view","formula","automation in notion"] },
  { bucket:"status", tag:"Notion Status", w:20, k:["notion status","incident","outage","downtime","degraded performance"] },
  { bucket:"creators", tag:"Creators", w:18, k:["template","creator","marketplace","notion creators","ambassador"] },

  // Hot: security/policy/pricing/outage
  { bucket:"hot", tag:"Hot", w:20, k:["security","vulnerability","cve","rce","breach","leak","policy","pricing","price","rate limit","outage","incident","downtime","abuse","jailbreak","lawsuit"] },

  // Release / Launch
  { bucket:"hot", tag:"Release", w:10, k:["release","launch","update","beta","preview","ga","general availability"] },
];

const STATE = {
  tab: "ai",
  sub: "all",
  q: "",
  onlyFresh: true,
  onlyTop: false,
  raw: [],
  filtered: []
};

const els = {
  mainTabs: [...document.querySelectorAll("#mainTabs .tab")],
  subTabs: document.getElementById("subTabs"),
  list: document.getElementById("list"),
  empty: document.getElementById("empty"),
  pill: document.getElementById("statusPill"),
  subTitle: document.getElementById("subTitle"),
  refreshBtn: document.getElementById("refreshBtn"),
  q: document.getElementById("q"),
  onlyFresh: document.getElementById("onlyFresh"),
  onlyTop: document.getElementById("onlyTop"),
};

function fmtKST(iso) {
  try{
    const d = new Date(iso);
    return d.toLocaleString("ko-KR", { timeZone: "Asia/Seoul", hour12: false });
  }catch(e){ return iso || ""; }
}
function hoursAgo(iso){
  const t = new Date(iso).getTime();
  return (Date.now() - t) / (1000*60*60);
}
function escapeHtml(str){
  return (str||"").replace(/[&<>"']/g, m => ({
    "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
  }[m]));
}
function escapeAttr(str){ return (str||"").replace(/"/g, "&quot;"); }

function scoreAndClassify(item){
  const text = ((item.title||"") + " " + (item.summary_ko||"") + " " + (item.source||"")).toLowerCase();
  let score = 0;
  let tags = new Set(item.tags || []);
  let buckets = new Set(item.buckets || []);

  for (const r of RULES){
    const hit = r.k.some(x => text.includes(x.toLowerCase()));
    if (hit){
      score += r.w;
      tags.add(r.tag);
      buckets.add(r.bucket);
    }
  }

  // ÏµúÏã†ÏÑ± Í∞ÄÏ†ê
  const h = item.published_at ? hoursAgo(item.published_at) : 999;
  if (h <= 24) score += 25;
  else if (h <= 72) score += 12;

  return {
    ...item,
    score: typeof item.score === "number" ? item.score : score,
    tags: [...tags],
    buckets: [...buckets],
  };
}

function normalize(items){
  return (items||[])
    .map(it => ({
      title: it.title || "",
      url: it.url || it.link || "",
      source: it.source || it.site || "Unknown",
      published_at: it.published_at || it.pubDate || it.published || "",
      summary_ko: it.summary_ko || it.summary || it.description_ko || "",
      tags: Array.isArray(it.tags) ? it.tags : [],
      buckets: Array.isArray(it.buckets) ? it.buckets : [],
      score: typeof it.score === "number" ? it.score : undefined
    }))
    .map(scoreAndClassify)
    .sort((a,b) => (b.score||0) - (a.score||0));
}

function badgeClass(tag){
  const t = (tag||"").toLowerCase();
  if (t.includes("gpt") || t.includes("claude") || t.includes("gemini") || t.includes("llm")) return "badge b1";
  if (t.includes("make") || t.includes("n8n") || t.includes("zapier") || t.includes("opal") || t.includes("automation") || t.includes("workflows")) return "badge b2";
  if (t.includes("hot") || t.includes("security") || t.includes("policy") || t.includes("pricing") || t.includes("release")) return "badge b3";
  if (t.includes("notion") || t.includes("notebooklm") || t.includes("creators") || t.includes("status")) return "badge b4";
  return "badge";
}

function buildSubTabs(){
  els.subTabs.innerHTML = "";
  const list = SUBTABS[STATE.tab] || [{id:"all",label:"All"}];
  for (const t of list){
    const el = document.createElement("div");
    el.className = "subtab" + (t.id === STATE.sub ? " active" : "");
    el.dataset.sub = t.id;
    el.textContent = t.label;
    el.addEventListener("click", () => {
      STATE.sub = t.id;
      buildSubTabs();
      render();
    });
    els.subTabs.appendChild(el);
  }
}

function applyFilters(){
  const q = STATE.q.trim().toLowerCase();
  let items = [...STATE.raw];

  // (1) ÏµúÍ∑º 24h ÌïÑÌÑ∞
  if (STATE.onlyFresh){
    items = items.filter(x => x.published_at && hoursAgo(x.published_at) <= 24);
  }

  // (2) ÏÉÅÏúÑÎßå
  if (STATE.onlyTop){
    items = items.slice(0, 12);
  }

  // (3) ÏÑúÎ∏åÌÉ≠ Î∂ÑÎ•ò ÌïÑÌÑ∞
  if (STATE.sub !== "all"){
    items = items.filter(x => (x.buckets||[]).includes(STATE.sub));
  }

  // (4) Í≤ÄÏÉâ
  if (q){
    items = items.filter(x => (x.title+" "+x.summary_ko+" "+x.source+" "+(x.tags||[]).join(" ")).toLowerCase().includes(q));
  }

  // (5) Î©îÏù∏ ÌÉ≠Î≥Ñ ÏµúÏÜå Ï†ïÎ¶¨: ÎÑàÎ¨¥ ÏÑûÏù¥Î©¥ ÏùòÎØ∏ ÏóÜÏñ¥ÏÑú ÏïΩÌïú Í∞ÄÎìú
  if (STATE.tab === "ai"){
    // AI ÌÉ≠ÏóêÏÑúÎäî notion-only Í∞ôÏùÄ Í±¥ Ï†úÍ±∞(ÎåÄÏ∂©)
    items = items.filter(x => !((x.tags||[]).some(t => String(t).toLowerCase().includes("notion")) && !(x.tags||[]).some(t => String(t).toLowerCase().includes("gpt") || String(t).toLowerCase().includes("claude") || String(t).toLowerCase().includes("gemini") || String(t).toLowerCase().includes("notebooklm"))));
  }
  if (STATE.tab === "automation"){
    // automation ÌÉ≠ÏóêÏÑúÎäî automation Í≥ÑÏó¥ ÌÉúÍ∑∏Í∞Ä ÏïÑÏòà ÏóÜÏúºÎ©¥ Îí§Î°ú
    items.sort((a,b)=>{
      const aAuto = (a.tags||[]).some(t => /make|n8n|zapier|opal|automation|workflows/i.test(t));
      const bAuto = (b.tags||[]).some(t => /make|n8n|zapier|opal|automation|workflows/i.test(t));
      if (aAuto !== bAuto) return bAuto - aAuto;
      return (b.score||0)-(a.score||0);
    });
  }

  STATE.filtered = items;
}

function render(){
  applyFilters();
  els.list.innerHTML = "";
  els.empty.style.display = STATE.filtered.length ? "none" : "block";

  for (const it of STATE.filtered){
    const card = document.createElement("div");
    card.className = "card";

    const tags = (it.tags||[]).slice(0, 7)
      .map(t => `<span class="${badgeClass(t)}">${escapeHtml(t)}</span>`).join("");

    card.innerHTML = `
      <div class="row">
        <h3 class="h">${escapeHtml(it.title)}</h3>
        <div class="badges">${tags}</div>
      </div>
      <div class="sum">${escapeHtml(it.summary_ko || "ÏöîÏïΩÏù¥ ÏóÜÏäµÎãàÎã§. (Î∞±ÏóîÎìúÏóêÏÑú Î≤àÏó≠/ÏöîÏïΩÏùÑ Ï†úÍ≥µÌïòÎèÑÎ°ù ÏÑ§Ï†ïÌïòÏÑ∏Ïöî)")}</div>
      <div class="foot">
        <div>
          <span class="small">Ï∂úÏ≤ò:</span> ${escapeHtml(it.source)}
          <span style="margin:0 8px; opacity:.5">|</span>
          <span class="small">ÏãúÍ∞Ñ(KST):</span> ${escapeHtml(fmtKST(it.published_at))}
        </div>
        <div><a href="${escapeAttr(it.url)}" target="_blank" rel="noopener">Ï†ÑÎ¨∏ Î≥¥Í∏∞ ‚Üó</a></div>
      </div>
    `;
    els.list.appendChild(card);
  }
}

async function fetchNews(){
  const hours = STATE.onlyFresh ? 24 : 168;
  const top = STATE.onlyTop ? 1 : 0;

  if (!API_BASE){
    const demo = demoData(STATE.tab);
    STATE.raw = normalize(demo.items);
    els.pill.textContent = "Îç∞Î™® Î™®Îìú";
    els.subTitle.textContent = subtitleByTab();
    buildSubTabs();
    render();
    return;
  }

  const url = `${API_BASE}?type=${encodeURIComponent(STATE.tab)}&hours=${hours}&top=${top}`;
  els.pill.textContent = "Í∞ÄÏ†∏Ïò§Îäî Ï§ë‚Ä¶";
  try{
    const res = await fetch(url, { cache: "no-store" });
    if (!res.ok) throw new Error("API ÏùëÎãµ Ïò§Î•ò: " + res.status);
    const data = await res.json();
    STATE.raw = normalize(data.items);

    const ts = data.updated_at ? fmtKST(data.updated_at) : fmtKST(new Date().toISOString());
    els.pill.textContent = "ÏóÖÎç∞Ïù¥Ìä∏: " + ts;
    els.subTitle.textContent = subtitleByTab();
    buildSubTabs();
    render();
  }catch(err){
    console.error(err);
    els.pill.textContent = "Î°úÎìú Ïã§Ìå®";
    els.subTitle.textContent = "API Ïó∞Í≤∞ Ïã§Ìå® (CORS/ÏóîÎìúÌè¨Ïù∏Ìä∏ ÌôïÏù∏)";
    const demo = demoData(STATE.tab);
    STATE.raw = normalize(demo.items);
    buildSubTabs();
    render();
  }
}

function subtitleByTab(){
  if (STATE.tab === "ai") return "LLM/ÏóêÏù¥Ï†ÑÌä∏/RAG/Î©ÄÌã∞Î™®Îã¨/NotebookLM Ï§ëÏã¨";
  if (STATE.tab === "automation") return "Make/n8n/Zapier/Google Opal + ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ïù¥Ïäà";
  return "Notion ÏóÖÎç∞Ïù¥Ìä∏/Ïû•Ïï†/ÌÅ¨Î¶¨ÏóêÏù¥ÌÑ∞ Ïù¥Ïäà";
}

/**
 * =========================
 * Îç∞Î™® Îç∞Ïù¥ÌÑ∞ (Ïπ¥ÌÖåÍ≥†Î¶¨/Ìà¥ Ìè¨Ìï®)
 * =========================
 */
function demoData(type){
  const base = new Date();
  const iso = (hAgo) => new Date(base.getTime() - hAgo*3600*1000).toISOString();

  if (type === "notion"){
    return {
      updated_at: iso(0.2),
      items: [
        {
          title: "Notion ÏóÖÎç∞Ïù¥Ìä∏: Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ Î≥¥Í∏∞/ÌïÑÌÑ∞ UX Í∞úÏÑ†(Îç∞Î™®)",
          url: "https://www.notion.so/",
          source: "Notion (demo)",
          published_at: iso(4),
          summary_ko: "Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ Î≥¥Í∏∞ Ï†ÑÌôòÍ≥º ÌïÑÌÑ∞ Ìé∏Ïßë Í≤ΩÌóòÏù¥ Í∞úÏÑ†ÎêòÏóàÎã§Îäî Îç∞Î™® Ìï≠Î™©ÏûÖÎãàÎã§. Ïã§Ï†ú Í≥µÏßÄÎäî Î∞±ÏóîÎìúÏóêÏÑú Í≥µÏãù ÏÜåÏä§Î•º ÏàòÏßëÌïòÏÑ∏Ïöî.",
          tags: ["Notion Update"],
        },
        {
          title: "Notion Status: Ïû•Ïï†/ÏßÄÏó∞ Ïù¥Ïäà(Îç∞Î™®)",
          url: "https://www.notion.so/",
          source: "Notion (demo)",
          published_at: iso(14),
          summary_ko: "ÏÉÅÌÉú ÌéòÏù¥ÏßÄ/Ïª§ÎÆ§ÎãàÌã∞ÏóêÏÑú Ïû•Ïï† Ïã†Ìò∏Î•º Îπ†Î•¥Í≤å Í∞êÏßÄÌïòÎäî ÌùêÎ¶ÑÏù¥ Ï§ëÏöîÌï©ÎãàÎã§.",
          tags: ["Notion Status","Hot"]
        },
        {
          title: "Notion Creators: ÌÖúÌîåÎ¶ø ÎÖ∏Ï∂ú/ÌòúÌÉù Í¥ÄÎ†® ÏÜåÏãù(Îç∞Î™®)",
          url: "https://www.notion.so/",
          source: "Notion (demo)",
          published_at: iso(18),
          summary_ko: "ÌÅ¨Î¶¨ÏóêÏù¥ÌÑ∞ ÌòúÌÉù/Ï†ïÏ±Ö Î≥ÄÍ≤ΩÏùÄ ÏàòÏùµÌôîÏóê ÏßÅÍ≤∞ÎêòÎØÄÎ°ú Î≥ÑÎèÑ ÌÉ≠ÏúºÎ°ú Î∂ÑÎ¶¨ÌñàÏäµÎãàÎã§.",
          tags: ["Creators","Hot"]
        }
      ]
    };
  }

  if (type === "automation"){
    return {
      updated_at: iso(0.2),
      items: [
        {
          title: "Make.com: ÏÉà Î™®Îìà/Î¶¥Î¶¨Ï¶à ÎÖ∏Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏(Îç∞Î™®)",
          url: "https://www.make.com/",
          source: "Make (demo)",
          published_at: iso(3),
          summary_ko: "MakeÎäî Î™®Îìà/Ïª§ÎÑ•ÌÑ∞ Î¶¥Î¶¨Ï¶àÍ∞Ä Ïû¶ÏïÑÏÑú ‚ÄòÎ≥ÄÍ≤ΩÏÇ¨Ìï≠ ÏöîÏïΩ + ÏòÅÌñ•ÎèÑ‚ÄôÍ∞Ä ÌïµÏã¨ÏûÖÎãàÎã§.",
          tags: ["Make","Automation","Release"]
        },
        {
          title: "n8n: Î≥¥Ïïà Ìå®Ïπò/Ï∑®ÏïΩÏ†ê Í≥µÏßÄ(Îç∞Î™®)",
          url: "https://n8n.io/",
          source: "n8n (demo)",
          published_at: iso(9),
          summary_ko: "ÏûêÎèôÌôî ÏÑúÎ≤Ñ Ïö¥ÏòÅ Ïãú Î≥¥Ïïà Ïù¥Ïäà(CVE/RCE)Îäî ÏµúÏÉÅÎã®ÏúºÎ°ú Ïò¨Î†§Ïïº Ìï©ÎãàÎã§.",
          tags: ["n8n","Hot","security"]
        },
        {
          title: "Zapier: AI/ÏóêÏù¥Ï†ÑÌä∏ Í∏∞Î∞ò ÏûêÎèôÌôî Í∏∞Îä• ÌôïÏû•(Îç∞Î™®)",
          url: "https://zapier.com/",
          source: "Zapier (demo)",
          published_at: iso(20),
          summary_ko: "ZapierÎäî AI Í∏∞Îä• ÏóÖÎç∞Ïù¥Ìä∏Î•º ‚ÄòÍ∏∞Ï°¥ ÏõåÌÅ¨ÌîåÎ°úÏö∞Ïóê Ïñ¥ÎñªÍ≤å Î∂ôÏù¥ÎäîÏßÄ‚Äô Í¥ÄÏ†êÏúºÎ°ú ÏöîÏïΩÌïòÎäîÍ≤å Ïã§Ï†ÑÏûÖÎãàÎã§.",
          tags: ["Zapier","Automation"]
        },
        {
          title: "Google Opal: ÎÖ∏ÏΩîÎìú/ÎØ∏ÎãàÏï± ÎπåÎçî Í¥ÄÎ†® ÏÜåÏãù(Îç∞Î™®)",
          url: "https://developers.googleblog.com/",
          source: "Google (demo)",
          published_at: iso(22),
          summary_ko: "Opal(Íµ¨Í∏Ä)ÏùÄ ‚ÄòÎπ†Î•∏ ÌîÑÎ°úÌÜ†ÌÉÄÏù¥Ìïë/ÎØ∏ÎãàÏï±‚Äô ÌùêÎ¶ÑÏóêÏÑú Ïù¥ÏäàÍ∞Ä Ïûò ÏÉùÍπÅÎãàÎã§. Ï∂úÏãú/ÌôïÏû•/Ï†ïÏ±Ö Î≥ÄÍ≤Ω ÏúÑÏ£ºÎ°ú ÏàòÏßëÌïòÏÑ∏Ïöî.",
          tags: ["Google Opal","Release"]
        }
      ]
    };
  }

  // AI
  return {
    updated_at: iso(0.2),
    items: [
      {
        title: "GPT/OpenAI: ÏÉà Î™®Îç∏/Ìà¥ ÏÇ¨Ïö© Ï†ïÏ±Ö Î≥ÄÌôî(Îç∞Î™®)",
        url: "https://openai.com/",
        source: "OpenAI (demo)",
        published_at: iso(2),
        summary_ko: "ÎåÄÌòï LLM ÏóÖÎç∞Ïù¥Ìä∏Îäî Í∏∞Îä•Î≥¥Îã§ ‚ÄòÏ†ïÏ±Ö/Í∞ÄÍ≤©/Ï†úÌïú‚Äô Î≥ÄÌôîÍ∞Ä Ïã§ÏÇ¨Ïö©Ïóê Îçî ÌÅΩÎãàÎã§. Î¶¥Î¶¨Ï¶à ÎÖ∏Ìä∏Í∞Ä ÎÇòÏò§Î©¥ Í∑∏ ÏàúÏÑúÎ°ú ÌôïÏù∏ÌïòÏÑ∏Ïöî.",
        tags: ["GPT/OpenAI","Hot","policy"]
      },
      {
        title: "Claude: ÏóêÏù¥Ï†ÑÌä∏/ÎèÑÍµ¨ ÏÇ¨Ïö© ÏÇ¨Î°Ä ÌôïÏÇ∞(Îç∞Î™®)",
        url: "https://www.anthropic.com/",
        source: "Anthropic (demo)",
        published_at: iso(8),
        summary_ko: "ÏóêÏù¥Ï†ÑÌä∏Îäî ÌîÑÎ°¨ÌîÑÌä∏Î≥¥Îã§ ‚ÄòÏûÖÎ†• Ïä§ÌÇ§Îßà Í≥†Ï†ï + Î∞òÎ≥µ Ïã§Ìñâ Íµ¨Ï°∞‚ÄôÍ∞Ä ÏÑ±Í≥ºÎ•º Ï¢åÏö∞Ìï©ÎãàÎã§.",
        tags: ["Claude/Anthropic","Agents","Automation"]
      },
      {
        title: "Gemini/Google: ÏõåÌÅ¨Ïä§ÌéòÏù¥Ïä§/ÌÅ¥ÎùºÏö∞Îìú Ïó∞Îèô Í∞ïÌôî(Îç∞Î™®)",
        url: "https://ai.googleblog.com/",
        source: "Google AI (demo)",
        published_at: iso(12),
        summary_ko: "Ï°∞ÏßÅ ÎèÑÏûÖÏù¥Î©¥ Í∂åÌïú/Í∞êÏÇ¨Î°úÍ∑∏/Îç∞Ïù¥ÌÑ∞ Î≥¥Ï°¥ Ï†ïÏ±ÖÏùÑ Î®ºÏ†Ä ÌôïÏù∏Ìï¥Ïïº ÏïàÏ†ÑÌï©ÎãàÎã§.",
        tags: ["Gemini/Google","Hot"]
      },
      {
        title: "NotebookLM: ÏÜåÏä§/Ïä§ÌäúÎîîÏò§ Í∏∞Îä• Í∞úÏÑ† ÏÜåÏãù(Îç∞Î™®)",
        url: "https://blog.google/",
        source: "Google (demo)",
        published_at: iso(16),
        summary_ko: "NotebookLMÏùÄ Î¨∏ÏÑú Í∏∞Î∞ò ÏöîÏïΩ/Ï†ïÎ¶¨ ÏõåÌÅ¨ÌîåÎ°úÏö∞ÏóêÏÑú Ï≤¥Í∞êÏù¥ Ïª§ÏÑú Î≥ÑÎèÑ Ïπ¥ÌÖåÍ≥†Î¶¨Î°ú Î∂ÑÎ¶¨ÌñàÏäµÎãàÎã§.",
        tags: ["NotebookLM","Productivity","Release"]
      },
      {
        title: "RAG/Vector: Pinecone/Weaviate Îì± Í≤ÄÏÉâ ÌíàÏßà Ïù¥Ïäà(Îç∞Î™®)",
        url: "https://www.pinecone.io/",
        source: "Vector DB (demo)",
        published_at: iso(22),
        summary_ko: "RAG ÌíàÏßàÏùÄ ‚ÄòÎç∞Ïù¥ÌÑ∞ Ï†ïÌï©ÏÑ± + Î¶¨Îû≠ÌÇπ + ÌèâÍ∞Ä‚Äô ÏÇºÍ∞ÅÌòïÏúºÎ°ú Î¥êÏïº Ìï©ÎãàÎã§.",
        tags: ["RAG/Vector","Eval/Observability"]
      }
    ]
  };
}

/** UI events */
els.mainTabs.forEach(t => t.addEventListener("click", () => {
  els.mainTabs.forEach(x => x.classList.remove("active"));
  t.classList.add("active");
  STATE.tab = t.dataset.tab;
  // ÌÉ≠ Î∞îÎÄåÎ©¥ ÏÑúÎ∏åÌÉ≠ÏùÄ Í∏∞Î≥∏ allÎ°ú
  STATE.sub = "all";
  fetchNews();
}));

els.refreshBtn.addEventListener("click", fetchNews);

els.q.addEventListener("input", (e) => {
  STATE.q = e.target.value || "";
  render();
});

els.onlyFresh.addEventListener("click", () => {
  STATE.onlyFresh = !STATE.onlyFresh;
  els.onlyFresh.classList.toggle("on", STATE.onlyFresh);
  fetchNews();
});

els.onlyTop.addEventListener("click", () => {
  STATE.onlyTop = !STATE.onlyTop;
  els.onlyTop.classList.toggle("on", STATE.onlyTop);
  fetchNews();
});

// init
buildSubTabs();
fetchNews();
// auto refresh (10 min)
setInterval(fetchNews, 10 * 60 * 1000);
</script>
</body>
</html>
